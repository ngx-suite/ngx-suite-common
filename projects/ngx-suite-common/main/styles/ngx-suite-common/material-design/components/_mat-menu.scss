@use 'sass:math';

@use 'mixins';


$side-padding: 1rem;
$menu-item-border-radius: var(--ns-border-radius--md);
$menu-panel-min-width: 280px;
$menu-item-color: var(--ns-color-text);
$menu-item-icon-color: var(--ns-color-neutral-300);
$menu-item-bg-color--hover: var(--ns-color-neutral-20);

:root {
    --mat-menu-item-hover-state-layer-color: #{$menu-item-bg-color--hover};
    --mat-menu-item-focus-state-layer-color: #{$menu-item-bg-color--hover};
}

body {
    --mdc-shape-medium: 8px;
}

.mat-mdc-menu-item ns-icon[matMenuItemIcon] {
    margin-right: 8px;
}

.mat-mdc-menu-panel[role='menu'] {
    @include mixins.ns-border-style(all);
    @include mixins.ns-shadow-hover();
    border-radius: $menu-item-border-radius;
    max-width: none;

    .mat-divider {
        margin-left: -$side-padding;
        margin-right: -$side-padding;
    }

    .mat-mdc-menu-content:not(:empty) {
        min-width: $menu-panel-min-width;
        padding: 8px $side-padding;
    }
}

.mat-mdc-menu-content,
.mat-mdc-menu-content .mat-mdc-menu-item {
    --mat-menu-item-label-text-size: var(--ns-font-size--body-lg);
    --mat-menu-item-label-text-line-height: 24px;
    --mat-menu-item-label-text-weight: 400;
    --mat-menu-item-label-text-tracking: 0;
}

.mat-mdc-menu-content .mat-mdc-menu-item {
    align-items: center;
    border-radius: 8px;
    border-style: none;
    color: $menu-item-color;
    display: flex;
    height: auto;
    margin: 0.25rem -#{$side-padding / 2};
    max-width: calc(100% + #{$side-padding});
    min-height: 40px;
    padding: 0 0.5rem;
    text-decoration: none;
    width: calc(100% + #{$side-padding});

    ns-icon {
        align-items: center;
        color: $menu-item-icon-color;

        > .mat-icon {
            margin: 0;
        }
    }

    .mat-mdc-menu-item-text {
        color: $menu-item-color;
        flex: 1;
        max-width: 100%;
    }

    ns-icon,
    .mat-icon {
        color: $menu-item-icon-color;
        margin: 0 0.5rem 0 0;
    }

    &:hover {
        background-color: $menu-item-bg-color--hover;
        color: $menu-item-color;
        text-decoration: none;
    }

    &.active,
    &.active:hover {
        background-color: var(--ns-color-primary-50);

        .mat-mdc-menu-item-text {
            color: var(--ns-color-primary-300);
            font-weight: 500;
        }

        ns-icon,
        .mat-icon {
            color: var(--ns-color-primary-300);
        }
    }
}

.ns-mat-menu-group-label {
    @include mixins.ns-font-label();
    color: var(--ns-color-neutral-90);
    padding: 16px 0 8px;
}

.ns-mat-menu-auto-width {
    .mat-mdc-menu-content:not(:empty) {
        min-width: 0;
    }
}

.ns-mat-menu--small.mat-mdc-menu-panel {
    .mat-mdc-menu-content:not(:empty) {
        min-width: 180px;
    }
}
